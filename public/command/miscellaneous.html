<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>miscellaneous</title>
  <link rel="stylesheet" href="./res/common.css">
</head>

<body>
  <article class="markdown-body">
    <h2>UV</h2>
    <h3 id="UV重映射到中心位置">UV重映射到中心位置</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_identifier'>float2</span> <span class='ace_identifier'>centerUV</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>uv</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_constant ace_numeric'>2</span> <span class='ace_keyword ace_operator'>-</span> <span class='ace_constant ace_numeric'>1</span>
</div></div></div></code></pre>
    <p>将UV值重映射为(-1,-1)~(1,1)，也就是将UV的中心点从左下角移动到中间位置。</p>
    
<hr>
    <h3 id="画圆">画圆</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_storage ace_type'>float</span> <span class='ace_identifier'>circle</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>smoothstep</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>_Radius</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>_Radius</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_identifier'>_CircleFade</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_identifier'>length</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>uv</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_constant ace_numeric'>2</span> <span class='ace_keyword ace_operator'>-</span> <span class='ace_constant ace_numeric'>1</span><span class='ace_paren ace_rparen'>))</span><span class='ace_punctuation ace_operator'>;</span>
</div></div></div></code></pre>
    <p>利用UV来画圆，通过_Radius来调节大小，_CircleFade来调节边缘虚化程序。</p>
    
<hr>
    <h3 id="画矩形">画矩形</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_identifier'>float2</span> <span class='ace_identifier'>centerUV</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_support ace_function ace_C99 ace_c'>abs</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>i</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>uv</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>xy</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_constant ace_numeric'>2</span> <span class='ace_keyword ace_operator'>-</span> <span class='ace_constant ace_numeric'>1</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_storage ace_type'>float</span> <span class='ace_identifier'>rectangleX</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>smoothstep</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>_Width</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>_Width</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_identifier'>_RectangleFade</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_identifier'>centerUV</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>x</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_storage ace_type'>float</span> <span class='ace_identifier'>rectangleY</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>smoothstep</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>_Heigth</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>_Heigth</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_identifier'>_RectangleFade</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_identifier'>centerUV</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_storage ace_type'>float</span> <span class='ace_identifier'>rectangleClamp</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>clamp</span><span class='ace_paren ace_lparen'>((</span><span class='ace_identifier'>rectangleX</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_identifier'>rectangleY</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>0.0</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>1.0</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div></div></div></code></pre>
    <p>利用UV来画矩形，_Width调节宽度，_Height调节高度，_RectangleFade调节边缘虚化度。</p>
    
<hr>
    <h3 id="黑白棋盘格">黑白棋盘格</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_identifier'>float2</span> <span class='ace_identifier'>uv</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>i</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>uv</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_identifier'>uv</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_support ace_function ace_C99 ace_c'>floor</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>uv</span><span class='ace_paren ace_rparen'>)</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_constant ace_numeric'>0.5</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_storage ace_type'>float</span> <span class='ace_identifier'>c</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>frac</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>uv</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>x</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_identifier'>uv</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span><span class='ace_paren ace_rparen'>)</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_constant ace_numeric'>2</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_keyword ace_control'>return</span> <span class='ace_identifier'>c</span><span class='ace_punctuation ace_operator'>;</span>
</div></div></div></code></pre>
    
<hr>
    <h3 id="极坐标">极坐标</h3>
    <pre><code><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'>float2 centerUV = (i.uv * 2 - 1);
</div><div class='ace_line'>float atan2UV = 1 - abs(atan2(centerUV.g, centerUV.r) / 3.14);
</div></div></div></code></pre>
    <p>利用UV来实现极坐标.</p>
    
<hr>
    <h3 id="将0-1的值控制在某个自定义的区间内">将0-1的值控制在某个自定义的区间内</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_identifier'>frac</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>x</span><span class='ace_keyword ace_operator'>*</span><span class='ace_identifier'>n</span><span class='ace_keyword ace_operator'>+</span><span class='ace_identifier'>n</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div></div></div></code></pre>
    <p>比如frac(i.uv*3.33+3.33);就是将0-1的uv值重新定义为0.33-0.66</p>
    
<hr>
    <h3 id="随机">随机</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_constant ace_numeric'>1.</span><span class='ace_identifier'>frac</span><span class='ace_paren ace_lparen'>(</span><span class='ace_support ace_function ace_C99 ace_c'>sin</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>dot</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>i</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>uv</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>xy</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_identifier'>float2</span><span class='ace_paren ace_lparen'>(</span><span class='ace_constant ace_numeric'>12.9898</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>78.233</span><span class='ace_paren ace_rparen'>)))</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_constant ace_numeric'>43758.5453</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_constant ace_numeric'>2.</span><span class='ace_identifier'>frac</span><span class='ace_paren ace_lparen'>(</span><span class='ace_support ace_function ace_C99 ace_c'>sin</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>x</span><span class='ace_paren ace_rparen'>)</span><span class='ace_keyword ace_operator'>*</span><span class='ace_identifier'>n</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div></div></div></code></pre>
    
<hr>
    <h3 id="旋转">旋转</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_identifier'>fixed</span> <span class='ace_identifier'>t</span><span class='ace_keyword ace_operator'>=</span><span class='ace_identifier'>_Time</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_identifier'>float2</span> <span class='ace_identifier'>rot</span><span class='ace_keyword ace_operator'>=</span> <span class='ace_support ace_function ace_C99 ace_c'>cos</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>t</span><span class='ace_paren ace_rparen'>)</span><span class='ace_keyword ace_operator'>*</span><span class='ace_identifier'>i</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>uv</span><span class='ace_keyword ace_operator'>+</span><span class='ace_support ace_function ace_C99 ace_c'>sin</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>t</span><span class='ace_paren ace_rparen'>)</span><span class='ace_keyword ace_operator'>*</span><span class='ace_identifier'>float2</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>i</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>uv</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_keyword ace_operator'>-</span><span class='ace_identifier'>i</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>uv</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>x</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div></div></div></code></pre>
    
<hr>
    <h3 id="序列图">序列图</h3>
    <p>splitUV是把原有的UV重新定位到左上角的第一格UV上，_Sequence.xy表示的是纹理是由几x几的格子组成的,_Sequence.z表示的是走序列的快慢.</p>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_identifier'>float2</span> <span class='ace_identifier'>splitUV</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>uv</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_constant ace_numeric'>1</span><span class='ace_keyword ace_operator'>/</span><span class='ace_identifier'>_Sequence</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>xy</span><span class='ace_paren ace_rparen'>)</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_identifier'>float2</span><span class='ace_paren ace_lparen'>(</span><span class='ace_constant ace_numeric'>0</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_identifier'>_Sequence</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span> <span class='ace_keyword ace_operator'>-</span> <span class='ace_constant ace_numeric'>1</span><span class='ace_keyword ace_operator'>/</span><span class='ace_identifier'>_Sequence</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_storage ace_type'>float</span> <span class='ace_support ace_function ace_C99 ace_c'>time</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>_Time</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_identifier'>_Sequence</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>z</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_identifier'>uv</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>splitUV</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_identifier'>float2</span><span class='ace_paren ace_lparen'>(</span><span class='ace_support ace_function ace_C99 ace_c'>floor</span><span class='ace_paren ace_lparen'>(</span><span class='ace_support ace_function ace_C99 ace_c'>time</span> <span class='ace_keyword ace_operator'>*</span><span class='ace_identifier'>_Sequence</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>x</span><span class='ace_paren ace_rparen'>)</span><span class='ace_keyword ace_operator'>/</span><span class='ace_identifier'>_Sequence</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>x</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_constant ace_numeric'>1</span><span class='ace_keyword ace_operator'>-</span><span class='ace_support ace_function ace_C99 ace_c'>floor</span><span class='ace_paren ace_lparen'>(</span><span class='ace_support ace_function ace_C99 ace_c'>time</span><span class='ace_paren ace_rparen'>)</span><span class='ace_keyword ace_operator'>/</span><span class='ace_identifier'>_Sequence</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div></div></div></code></pre>
    
<hr>
    <h3 id="HSV2RGB方法01">HSV2RGB方法01</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_identifier'>fixed3</span> <span class='ace_identifier'>hsv2rgb</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>fixed3</span> <span class='ace_identifier'>c</span><span class='ace_paren ace_rparen'>)</span>
</div><div class='ace_line'><span class='ace_paren ace_lparen'>{</span>
</div><div class='ace_line'>    <span class='ace_identifier'>float2</span> <span class='ace_identifier'>rot</span><span class='ace_keyword ace_operator'>=</span> <span class='ace_support ace_function ace_C99 ace_c'>cos</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>t</span><span class='ace_paren ace_rparen'>)</span><span class='ace_keyword ace_operator'>*</span><span class='ace_identifier'>i</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>uv</span><span class='ace_keyword ace_operator'>+</span><span class='ace_support ace_function ace_C99 ace_c'>sin</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>t</span><span class='ace_paren ace_rparen'>)</span><span class='ace_keyword ace_operator'>*</span><span class='ace_identifier'>float2</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>i</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>uv</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_keyword ace_operator'>-</span><span class='ace_identifier'>i</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>uv</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>x</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>    <span class='ace_identifier'>float3</span> <span class='ace_identifier'>k</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_support ace_function ace_C99 ace_c'>fmod</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>float3</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_constant ace_numeric'>5</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>3</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>1</span><span class='ace_paren ace_rparen'>)</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_identifier'>c</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>x</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_constant ace_numeric'>6</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>6</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>    <span class='ace_keyword ace_control'>return</span> <span class='ace_identifier'>c</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>z</span> <span class='ace_keyword ace_operator'>-</span> <span class='ace_identifier'>c</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>z</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_identifier'>c</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_identifier'>max</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>min</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>min</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>k</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>4</span> <span class='ace_keyword ace_operator'>-</span> <span class='ace_identifier'>k</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>1</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>0</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_paren ace_rparen'>}</span>
</div></div></div></code></pre>
    
<hr>
    <h3 id="HSV2RGB方法02(更优化)">HSV2RGB方法02(更优化)</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_identifier'>fixed3</span> <span class='ace_identifier'>hsv2rgb</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>fixed3</span> <span class='ace_identifier'>c</span><span class='ace_paren ace_rparen'>)</span>
</div><div class='ace_line'><span class='ace_paren ace_lparen'>{</span>
</div><div class='ace_line'>    <span class='ace_identifier'>float4</span> <span class='ace_identifier'>K</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>float4</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_constant ace_numeric'>1.0</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>2.0</span> <span class='ace_keyword ace_operator'>/</span> <span class='ace_constant ace_numeric'>3.0</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>1.0</span> <span class='ace_keyword ace_operator'>/</span> <span class='ace_constant ace_numeric'>3.0</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>3.0</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>    <span class='ace_identifier'>float3</span> <span class='ace_identifier'>p</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_support ace_function ace_C99 ace_c'>abs</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>frac</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>c</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>xxx</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_identifier'>K</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>xyz</span><span class='ace_paren ace_rparen'>)</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_constant ace_numeric'>6.0</span> <span class='ace_keyword ace_operator'>-</span> <span class='ace_identifier'>K</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>www</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>    <span class='ace_keyword ace_control'>return</span> <span class='ace_identifier'>c</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>z</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_identifier'>lerp</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>K</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>xxx</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_identifier'>saturate</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>p</span> <span class='ace_keyword ace_operator'>-</span> <span class='ace_identifier'>K</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>xxx</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_identifier'>c</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_paren ace_rparen'>}</span>
</div></div></div></code></pre>
    
<hr>
    <h2>顶点</h2>
    <h3 id="模型中心点坐标">模型中心点坐标</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_identifier'>float3</span> <span class='ace_identifier'>objCenterPos</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>mul</span><span class='ace_paren ace_lparen'>(</span> <span class='ace_identifier'>unity_ObjectToWorld</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_identifier'>float4</span><span class='ace_paren ace_lparen'>(</span> <span class='ace_constant ace_numeric'>0</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>0</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>0</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>1</span> <span class='ace_paren ace_rparen'>)</span> <span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>xyz</span><span class='ace_punctuation ace_operator'>;</span>
</div></div></div></code></pre>
    <p>在Shader中获取当前模型的中心点，其实就是将(0,0,0)点从本地转换到世界空间坐标下即可，在制作对象从下往之类的效果时常用到。</p>
    
<hr>
    <h3 id="BillBoard">BillBoard</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_comment'>//<span class='ace_cjk' style='width:NaNpx'>在</span>Properties<span class='ace_cjk' style='width:NaNpx'>中</span><span class='ace_cjk' style='width:NaNpx'>添</span><span class='ace_cjk' style='width:NaNpx'>加</span>:</span>
</div><div class='ace_line'>
</div><div class='ace_line'><span class='ace_paren ace_lparen'>[</span><span class='ace_identifier'>Enum</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>BillBoard</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_constant ace_numeric'>1</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_identifier'>VerticalBillboard</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_constant ace_numeric'>0</span><span class='ace_paren ace_rparen'>)]</span><span class='ace_identifier'>BillBoardType</span><span class='ace_paren ace_lparen'>(</span><span class='ace_string ace_start'>&#34;</span><span class='ace_string'>BillBoard Type</span><span class='ace_string ace_end'>&#34;</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_storage ace_type'>float</span><span class='ace_paren ace_rparen'>)</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_constant ace_numeric'>1</span>
</div><div class='ace_line'>
</div><div class='ace_line'><span class='ace_comment'>//<span class='ace_cjk' style='width:NaNpx'>在</span><span class='ace_cjk' style='width:NaNpx'>顶</span><span class='ace_cjk' style='width:NaNpx'>点</span><span class='ace_cjk' style='width:NaNpx'>着</span><span class='ace_cjk' style='width:NaNpx'>色</span><span class='ace_cjk' style='width:NaNpx'>器</span><span class='ace_cjk' style='width:NaNpx'>中</span><span class='ace_cjk' style='width:NaNpx'>添</span><span class='ace_cjk' style='width:NaNpx'>加</span>:</span>
</div><div class='ace_line'>
</div><div class='ace_line'><span class='ace_comment'>//<span class='ace_cjk' style='width:NaNpx'>将</span><span class='ace_cjk' style='width:NaNpx'>相</span><span class='ace_cjk' style='width:NaNpx'>机</span><span class='ace_cjk' style='width:NaNpx'>从</span><span class='ace_cjk' style='width:NaNpx'>世</span><span class='ace_cjk' style='width:NaNpx'>界</span><span class='ace_cjk' style='width:NaNpx'>空</span><span class='ace_cjk' style='width:NaNpx'>间</span><span class='ace_cjk' style='width:NaNpx'>转</span><span class='ace_cjk' style='width:NaNpx'>换</span><span class='ace_cjk' style='width:NaNpx'>到</span><span class='ace_cjk' style='width:NaNpx'>模</span><span class='ace_cjk' style='width:NaNpx'>型</span><span class='ace_cjk' style='width:NaNpx'>的</span><span class='ace_cjk' style='width:NaNpx'>本</span><span class='ace_cjk' style='width:NaNpx'>地</span><span class='ace_cjk' style='width:NaNpx'>空</span><span class='ace_cjk' style='width:NaNpx'>间</span><span class='ace_cjk' style='width:NaNpx'>中</span>,<span class='ace_cjk' style='width:NaNpx'>而</span><span class='ace_cjk' style='width:NaNpx'>这</span><span class='ace_cjk' style='width:NaNpx'>个</span><span class='ace_cjk' style='width:NaNpx'>转</span><span class='ace_cjk' style='width:NaNpx'>换</span><span class='ace_cjk' style='width:NaNpx'>后</span><span class='ace_cjk' style='width:NaNpx'>的</span><span class='ace_cjk' style='width:NaNpx'>相</span><span class='ace_cjk' style='width:NaNpx'>机</span><span class='ace_cjk' style='width:NaNpx'>坐</span><span class='ace_cjk' style='width:NaNpx'>标</span><span class='ace_cjk' style='width:NaNpx'>即</span><span class='ace_cjk' style='width:NaNpx'>是</span><span class='ace_cjk' style='width:NaNpx'>点</span><span class='ace_cjk' style='width:NaNpx'>也</span><span class='ace_cjk' style='width:NaNpx'>是</span><span class='ace_cjk' style='width:NaNpx'>模</span><span class='ace_cjk' style='width:NaNpx'>型</span><span class='ace_cjk' style='width:NaNpx'>中</span><span class='ace_cjk' style='width:NaNpx'>心</span><span class='ace_cjk' style='width:NaNpx'>点</span>(0,0,0)<span class='ace_cjk' style='width:NaNpx'>到</span><span class='ace_cjk' style='width:NaNpx'>相</span><span class='ace_cjk' style='width:NaNpx'>机</span><span class='ace_cjk' style='width:NaNpx'>的</span><span class='ace_cjk' style='width:NaNpx'>方</span><span class='ace_cjk' style='width:NaNpx'>向</span><span class='ace_cjk' style='width:NaNpx'>向</span><span class='ace_cjk' style='width:NaNpx'>量</span><span class='ace_cjk' style='width:NaNpx'>，</span></span>
</div><div class='ace_line'><span class='ace_comment'>//<span class='ace_cjk' style='width:NaNpx'>如</span><span class='ace_cjk' style='width:NaNpx'>果</span><span class='ace_cjk' style='width:NaNpx'>按</span><span class='ace_cjk' style='width:NaNpx'>照</span><span class='ace_cjk' style='width:NaNpx'>相</span><span class='ace_cjk' style='width:NaNpx'>机</span><span class='ace_cjk' style='width:NaNpx'>空</span><span class='ace_cjk' style='width:NaNpx'>间</span><span class='ace_cjk' style='width:NaNpx'>来</span><span class='ace_cjk' style='width:NaNpx'>定</span><span class='ace_cjk' style='width:NaNpx'>义</span><span class='ace_cjk' style='width:NaNpx'>的</span><span class='ace_cjk' style='width:NaNpx'>话</span><span class='ace_cjk' style='width:NaNpx'>，</span><span class='ace_cjk' style='width:NaNpx'>可</span><span class='ace_cjk' style='width:NaNpx'>以</span><span class='ace_cjk' style='width:NaNpx'>把</span><span class='ace_cjk' style='width:NaNpx'>这</span><span class='ace_cjk' style='width:NaNpx'>个</span><span class='ace_cjk' style='width:NaNpx'>向</span><span class='ace_cjk' style='width:NaNpx'>量</span><span class='ace_cjk' style='width:NaNpx'>定</span><span class='ace_cjk' style='width:NaNpx'>义</span><span class='ace_cjk' style='width:NaNpx'>为</span><span class='ace_cjk' style='width:NaNpx'>相</span><span class='ace_cjk' style='width:NaNpx'>机</span><span class='ace_cjk' style='width:NaNpx'>空</span><span class='ace_cjk' style='width:NaNpx'>间</span><span class='ace_cjk' style='width:NaNpx'>下</span><span class='ace_cjk' style='width:NaNpx'>的</span>Z<span class='ace_cjk' style='width:NaNpx'>值</span></span>
</div><div class='ace_line'><span class='ace_identifier'>float3</span>  <span class='ace_identifier'>cameraOS_Z</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>mul</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>unity_WorldToObject</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_identifier'>float4</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>_WorldSpaceCameraPos</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>1</span><span class='ace_paren ace_rparen'>))</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_comment'>//BillBoardType=0<span class='ace_cjk' style='width:NaNpx'>时</span>,<span class='ace_cjk' style='width:NaNpx'>圆</span><span class='ace_cjk' style='width:NaNpx'>柱</span><span class='ace_cjk' style='width:NaNpx'>形</span>BillBoard;BillBoard=1<span class='ace_cjk' style='width:NaNpx'>时</span>,<span class='ace_cjk' style='width:NaNpx'>圆</span><span class='ace_cjk' style='width:NaNpx'>形</span>BillBoard;</span>
</div><div class='ace_line'><span class='ace_identifier'>cameraOS_Z</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>cameraOS_Z</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_identifier'>BillBoardType</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_comment'>//<span class='ace_cjk' style='width:NaNpx'>归</span><span class='ace_cjk' style='width:NaNpx'>一</span><span class='ace_cjk' style='width:NaNpx'>化</span><span class='ace_cjk' style='width:NaNpx'>，</span><span class='ace_cjk' style='width:NaNpx'>使</span><span class='ace_cjk' style='width:NaNpx'>其</span><span class='ace_cjk' style='width:NaNpx'>为</span><span class='ace_cjk' style='width:NaNpx'>长</span><span class='ace_cjk' style='width:NaNpx'>度</span><span class='ace_cjk' style='width:NaNpx'>不</span><span class='ace_cjk' style='width:NaNpx'>变</span><span class='ace_cjk' style='width:NaNpx'>模</span><span class='ace_cjk' style='width:NaNpx'>为</span>1<span class='ace_cjk' style='width:NaNpx'>的</span><span class='ace_cjk' style='width:NaNpx'>向</span><span class='ace_cjk' style='width:NaNpx'>量</span></span>
</div><div class='ace_line'><span class='ace_identifier'>cameraOS_Z</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>normalize</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>cameraOS_Z</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_comment'>//<span class='ace_cjk' style='width:NaNpx'>假</span><span class='ace_cjk' style='width:NaNpx'>设</span><span class='ace_cjk' style='width:NaNpx'>相</span><span class='ace_cjk' style='width:NaNpx'>机</span><span class='ace_cjk' style='width:NaNpx'>空</span><span class='ace_cjk' style='width:NaNpx'>间</span><span class='ace_cjk' style='width:NaNpx'>下</span><span class='ace_cjk' style='width:NaNpx'>的</span>Y<span class='ace_cjk' style='width:NaNpx'>轴</span><span class='ace_cjk' style='width:NaNpx'>向</span><span class='ace_cjk' style='width:NaNpx'>量</span><span class='ace_cjk' style='width:NaNpx'>为</span>(0,1,0)</span>
</div><div class='ace_line'><span class='ace_identifier'>cameraOS_Y</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>float3</span><span class='ace_paren ace_lparen'>(</span><span class='ace_constant ace_numeric'>0</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_constant ace_numeric'>1</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_constant ace_numeric'>0</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_comment'>//<span class='ace_cjk' style='width:NaNpx'>利</span><span class='ace_cjk' style='width:NaNpx'>用</span><span class='ace_cjk' style='width:NaNpx'>叉</span><span class='ace_cjk' style='width:NaNpx'>积</span><span class='ace_cjk' style='width:NaNpx'>求</span><span class='ace_cjk' style='width:NaNpx'>出</span><span class='ace_cjk' style='width:NaNpx'>相</span><span class='ace_cjk' style='width:NaNpx'>机</span><span class='ace_cjk' style='width:NaNpx'>空</span><span class='ace_cjk' style='width:NaNpx'>间</span><span class='ace_cjk' style='width:NaNpx'>下</span><span class='ace_cjk' style='width:NaNpx'>的</span>X<span class='ace_cjk' style='width:NaNpx'>轴</span><span class='ace_cjk' style='width:NaNpx'>向</span><span class='ace_cjk' style='width:NaNpx'>量</span></span>
</div><div class='ace_line'><span class='ace_identifier'>float3</span> <span class='ace_identifier'>cameraOS_X</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>normalize</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>cross</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>cameraOS_Z</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_identifier'>cameraOS_Y</span><span class='ace_paren ace_rparen'>))</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_comment'>//<span class='ace_cjk' style='width:NaNpx'>再</span><span class='ace_cjk' style='width:NaNpx'>次</span><span class='ace_cjk' style='width:NaNpx'>利</span><span class='ace_cjk' style='width:NaNpx'>用</span><span class='ace_cjk' style='width:NaNpx'>叉</span><span class='ace_cjk' style='width:NaNpx'>积</span><span class='ace_cjk' style='width:NaNpx'>求</span><span class='ace_cjk' style='width:NaNpx'>出</span><span class='ace_cjk' style='width:NaNpx'>相</span><span class='ace_cjk' style='width:NaNpx'>机</span><span class='ace_cjk' style='width:NaNpx'>空</span><span class='ace_cjk' style='width:NaNpx'>间</span><span class='ace_cjk' style='width:NaNpx'>下</span><span class='ace_cjk' style='width:NaNpx'>的</span>Y<span class='ace_cjk' style='width:NaNpx'>轴</span><span class='ace_cjk' style='width:NaNpx'>向</span><span class='ace_cjk' style='width:NaNpx'>量</span></span>
</div><div class='ace_line'><span class='ace_identifier'>cameraOS_Y</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>cross</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>cameraOS_X</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_identifier'>cameraOS_Z</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_comment'>//<span class='ace_cjk' style='width:NaNpx'>通</span><span class='ace_cjk' style='width:NaNpx'>过</span><span class='ace_cjk' style='width:NaNpx'>向</span><span class='ace_cjk' style='width:NaNpx'>量</span><span class='ace_cjk' style='width:NaNpx'>与</span><span class='ace_cjk' style='width:NaNpx'>常</span><span class='ace_cjk' style='width:NaNpx'>数</span><span class='ace_cjk' style='width:NaNpx'>相</span><span class='ace_cjk' style='width:NaNpx'>乘</span><span class='ace_cjk' style='width:NaNpx'>来</span><span class='ace_cjk' style='width:NaNpx'>把</span><span class='ace_cjk' style='width:NaNpx'>顶</span><span class='ace_cjk' style='width:NaNpx'>点</span><span class='ace_cjk' style='width:NaNpx'>的</span>X<span class='ace_cjk' style='width:NaNpx'>轴</span><span class='ace_cjk' style='width:NaNpx'>与</span>Y<span class='ace_cjk' style='width:NaNpx'>对</span><span class='ace_cjk' style='width:NaNpx'>应</span><span class='ace_cjk' style='width:NaNpx'>到</span>cameraOS<span class='ace_cjk' style='width:NaNpx'>的</span>X<span class='ace_cjk' style='width:NaNpx'>与</span>Y<span class='ace_cjk' style='width:NaNpx'>轴</span><span class='ace_cjk' style='width:NaNpx'>向</span><span class='ace_cjk' style='width:NaNpx'>上</span></span>
</div><div class='ace_line'><span class='ace_identifier'>float3</span> <span class='ace_identifier'>billboardPositionOS</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>cameraOS_X</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_identifier'>v</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>vertex</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>x</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_identifier'>cameraOS_Y</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_identifier'>v</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>vertex</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_identifier'>o</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>pos</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>UnityObjectToClipPos</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>billboardPositionOS</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div></div></div></code></pre>
    
<hr>
    <h3 id="网格阴影">网格阴影</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_identifier'>half4</span> <span class='ace_identifier'>worldPos</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>mul</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>unity_ObjectToWorld</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_identifier'>v</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>vertex</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_identifier'>worldPos</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_constant ace_numeric'>2.47</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_identifier'>worldPos</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>xz</span> <span class='ace_keyword ace_operator'>+=</span> <span class='ace_identifier'>fixed2</span><span class='ace_paren ace_lparen'>(</span><span class='ace_cjk' style='width:NaNpx'>阴</span><span class='ace_cjk' style='width:NaNpx'>影</span><span class='ace_identifier'>X</span><span class='ace_cjk' style='width:NaNpx'>方</span><span class='ace_cjk' style='width:NaNpx'>向</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_cjk' style='width:NaNpx'>阴</span><span class='ace_cjk' style='width:NaNpx'>影</span><span class='ace_identifier'>Z</span><span class='ace_cjk' style='width:NaNpx'>方</span><span class='ace_cjk' style='width:NaNpx'>向</span><span class='ace_paren ace_rparen'>)</span><span class='ace_keyword ace_operator'>*</span><span class='ace_identifier'>v</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>vertex</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>y</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_identifier'>o</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>pos</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>mul</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>UNITY_MATRIX_VP</span><span class='ace_punctuation ace_operator'>,</span><span class='ace_identifier'>worldPos</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div></div></div></code></pre>
    
<hr>
    <h2>其它</h2>
    <h3 id="菲涅尔">菲涅尔</h3>
    <pre><code class="language-c_cpp"><div class='ace-tm'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_identifier'>fixed4</span> <span class='ace_identifier'>rimColor</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>fixed4</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_constant ace_numeric'>0</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>0.4</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>1</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>1</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_identifier'>half3</span> <span class='ace_identifier'>worldViewDir</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>normalize</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>UnityWorldSpaceViewDir</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>i</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>worldPos</span><span class='ace_paren ace_rparen'>))</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_storage ace_type'>float</span> <span class='ace_identifier'>ndotv</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>dot</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>i</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>normal</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_identifier'>worldViewDir</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_storage ace_type'>float</span> <span class='ace_identifier'>fresnel</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_constant ace_numeric'>0.2</span> <span class='ace_keyword ace_operator'>+</span> <span class='ace_constant ace_numeric'>2.0</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_support ace_function ace_C99 ace_c'>pow</span> <span class='ace_paren ace_lparen'>(</span><span class='ace_constant ace_numeric'>1.0</span> <span class='ace_keyword ace_operator'>-</span> <span class='ace_identifier'>ndotv</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_constant ace_numeric'>2.0</span><span class='ace_paren ace_rparen'>))</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_identifier'>fixed4</span> <span class='ace_identifier'>col</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>rimColor</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_identifier'>fresnel</span><span class='ace_punctuation ace_operator'>;</span>
</div></div></div></code></pre>
    
<hr>
    <h3 id="XRay射线">XRay射线</h3>
    <ol>
      <li>新建一个Pass</li>
      <li>设置自己想要的Blend</li>
      <li>Zwrite Off关闭深度写入</li>
      <li>Ztest greater深度测试设置为大于</li>
    </ol>

  </article>
</body>

</html>
<hr>